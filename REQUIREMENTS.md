# 요구사항 정리 (Functional/Non-Functional)

본 문서는 ‘롤 팀 경매 시스템(20인/4팀)’의 기능 및 비기능 요구사항을 정리합니다.

## 1. 용어 정의
- 선수카드: 설정 화면의 선수 미리보기 카드(이미지/역할/티어/각오/팀장 편집 포함)
- 팀장: 경매 대상에서 제외되며 팀 대표로서 입찰만 수행하는 4인
- 본경매/재경매: 모든 선수를 1회 경매 후, 유찰 선수에 대한 최대 2회의 추가 경매
- 유찰: 선수에 대한 낙찰 없이 다음 선수로 넘어간 경우

## 2. 기능 요구사항 (Functional)
- F-01 오프라인 실행
  - 브라우저에서 `index.html`만으로 전체 기능 사용 가능(네트워크 불필요)
- F-02 선수 입력 형식
  - 한 줄: 이름[, 역할1|역할2][, 티어][, 이미지URL][, 설명]
  - 라인 구분자는 `|` 또는 `/` 허용
  - 티어는 약식/풀네임 모두 입력 가능(예: D2, Diamond II)
- F-03 선수카드 통합 편집
  - 이미지: 드래그&드롭/클릭 업로드/클립보드 붙여넣기
  - 라인: 표준 칩 토글 및 기타 역할(| 구분) 추가
  - 티어: 텍스트 입력 + 추천 목록(datalist)
  - 각오: 텍스트 입력 → 경매 화면 표시
  - 팀장: 체크 지정/해제, 위/아래 순서 변경, 최대 4명 제한
  - 카드에서의 변경은 선수 텍스트 목록에 즉시 반영되어 저장됨
- F-04 팀장/팀 구성
  - 팀장 4명은 경매 풀에서 자동 제외
  - 옵션: 팀장 이름을 팀명으로 사용
- F-05 경매 진행
  - 현재 선수 표시(이름/라인/이미지/티어/각오)
  - 입찰/낙찰/패스/되돌리기(Undo)
  - 입찰 규칙: 시작가 5, 5 단위 증가, 팀 잔액 이내
  - 팀 최대 인원 제한(기본 5명)
  - 역할 중복 방지(옵션): 같은 팀 내 동일 라인 중복 금지
- F-06 순서/모드 옵션
  - 선수 경매 순서: 무작위/순서대로
  - 팀 순서(입찰 팀 목록): 무작위/순서대로, 재경매 시작 시 재섞기 가능
  - 지명(턴제) 모드: 현재 턴의 팀이 남은 선수 중 한 명을 선택해 즉시 순서에 올림
- F-07 재경매/유찰 처리
  - 모든 선수 1회 경매 후 유찰 선수로 재경매 라운드 구성
  - 재경매 최대 2회
  - 최종 남은 선수는 무작위로 0포 배정(팀 최대 인원 내에서만)
- F-08 저장/불러오기/내보내기
  - LocalStorage 저장/불러오기(상태 마이그레이션 포함)
  - CSV/JSON 내보내기(티어/라인/이미지/각오 포함)
- F-09 UI 확장성
  - UI 크기 토글(작게/보통/크게)
  - 반응형 표시(작은 화면에서 단일 열)

## 3. 비기능 요구사항 (Non-Functional)
- N-01 오프라인 우선
  - 네트워크 없이 모든 주요 기능 동작, 외부 이미지 URL은 불가 시 Data URL 사용 권장
- N-02 성능/안정성
  - Data URL 이미지 저장 시 LocalStorage 용량(약 5~10MB) 주의
  - 드래그&드롭/붙여넣기 시 자동 리사이즈/압축으로 용량 절감
- N-03 사용성
  - 카드 중심의 일관된 편집 플로우(원본 텍스트 자동 동기화)
  - 긴 텍스트/버튼 overflow 방지, 컨트롤 줄바꿈 허용
- N-04 이식성
  - 순수 정적 파일(HTML/CSS/JS), 어느 환경에서도 브라우저만 있으면 사용 가능

## 4. 데이터 모델(요약)
- Player: { name, roles[], role, tier, image, description }
- Team: { id, name, leader, budgetLeft, roster[] }
- State: { budget, rosterSize, enforceRoles, randomizeOrder, randomizeTeamOrder, nominationMode, round, reauctionMax, teams[], queue[], leaders[], teamOrder[], nominatorIndex, currentIndex, highest, history[], unsoldCollector[] }

## 5. 규칙/로직 상세
- 입찰 최소/증가 단위: 5 포인트, 현재 최고가 없을 때 시작가 5
- 예산 검사: 팀 잔액 이내만 허용
- 역할 중복 방지(옵션): 선수의 가능한 라인 중 하나라도 팀 내 비어 있으면 입찰 가능
- 유찰/재경매: 라운드 종료 시 유찰 선수 큐로 라운드 구성, 2회 초과 시 0포 무작위 배정
- 지명(턴제) 모드: 낙찰/패스 시 지명 팀 턴 순환

## 6. 내보내기 포맷
- CSV: `Team,Leader,Player,Roles,Tier,ImageURL,Description,Cost,BudgetLeftAfter`
- JSON: 설정 + 전체 팀/로스터/상태 객체

## 7. 한계/주의
- 이미지 Data URL은 용량이 크므로 가능한 한 적정 해상도로 사용 권장
- 브라우저별 LocalStorage 정책 차이로 저장 실패 가능 → 수시 저장/백업 권장

## 8. 향후 개선(제안)
- 티어 드롭다운 고정 리스트 + 유효성 표시
- 팀 로스터에 각오 아이콘/툴팁 표시 옵션
- 이미지 고급 압축(품질 슬라이더, HEIC 변환)
- 지명 모드에서 자동 추천(예산/포지션/티어 가중치)
